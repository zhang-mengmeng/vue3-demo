import{d as R,a as S,r as V,o as i,c as f,b as t,w as n,u as A,k as I,e as a,f as c,F as L,l as N,t as h,g as O,m as j,_ as D}from"./index-CSmAIVf7.js";const F={class:"common-layout"},P={style:{display:"flex","justify-content":"space-between","align-items":"center",height:"100%"}},T=R({__name:"index",setup(z){const g=(o,e)=>{console.log(o,e)},x=(o,e)=>{console.log(o,e)},r=A(),_=S([]);(()=>{fetch("http://localhost:3000/user/getinfo",{method:"get",headers:{authorization:localStorage.getItem("token")}}).then(o=>o.json()).then(o=>{const e=r.options.routes.find(s=>s.name=="da");e&&Array.isArray(o.route)&&(o.route.forEach(s=>{var l;(l=e.children)==null||l.push({path:s.path,name:s.name,meta:s.meta,component:()=>I(()=>import(`../src/${s.component}`),[])})}),r.addRoute(e)),_.push(...o.route)})})();const u=V("");(()=>{u.value="",new EventSource("http://localhost:3000/user/sse").addEventListener("message",e=>{u.value+=e.data})})();const v=()=>{localStorage.clear(),r.push({name:"login"})};return(o,e)=>{const s=a("icon-menu"),l=a("el-icon"),d=a("el-menu-item"),y=a("el-menu"),b=a("el-aside"),k=a("el-button"),w=a("el-header"),C=a("router-view"),E=a("el-main"),m=a("el-container");return i(),f("div",F,[t(m,null,{default:n(()=>[t(b,{width:"200px"},{default:n(()=>[t(y,{"active-text-color":"#ffd04b","background-color":"#545c64",class:"el-menu-vertical-demo","default-active":"2","text-color":"#fff",onOpen:g,onClose:x,router:""},{default:n(()=>[t(d,{index:"/home"},{default:n(()=>[t(l,null,{default:n(()=>[t(s)]),_:1}),e[0]||(e[0]=c("span",null,"首页",-1))]),_:1}),(i(!0),f(L,null,N(_,(p,B)=>(i(),j(d,{index:p.path,key:B},{default:n(()=>[t(l),c("span",null,h(p.meta.title),1)]),_:2},1032,["index"]))),128))]),_:1})]),_:1}),t(m,null,{default:n(()=>[t(w,{style:{"border-bottom":"1px solid gray"}},{default:n(()=>[c("div",P,[c("p",null,h(u.value),1),t(k,{onClick:v},{default:n(()=>e[1]||(e[1]=[O("退出")])),_:1})])]),_:1}),t(E,null,{default:n(()=>[t(C)]),_:1})]),_:1})]),_:1})])}}}),H=D(T,[["__scopeId","data-v-5633b914"]]);export{H as default};
